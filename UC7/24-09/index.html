<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Cadastro de Livros</title>
</head>

<body>
    <h1>Cadastro de Livro</h1>

    <form id="form-livro" onsubmit="cadastrarLivro(event)" style="display: flex; flex-direction: column; width: 300px;">
        <label for="campo-titulo">Título</label>
        <input type="text" id="campo-titulo" required />

        <label for="campo-autor">Autor</label>
        <input type="text" id="campo-autor" required />

        <label for="campo-ano">Ano</label>
        <input type="number" id="campo-ano" required />

        <label for="campo-genero">Gênero</label>
        <input type="text" id="campo-genero" required />

        <label for="campo-isbn">ISBN</label>
        <input type="text" id="campo-isbn" required />

        <button type="submit" style="margin-top: 10px;">Cadastrar</button>
        <button type="reset" style="margin-top: 5px;">Limpar</button>
    </form>

    <h2>Livros Cadastrados</h2>

    <table border="1" style="width: 100%; max-width: 700px; border-collapse: collapse;">
        <thead>
            <tr>
                <th>Título</th>
                <th>Autor</th>
                <th>Ano</th>
                <th>Gênero</th>
                <th>ISBN</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody id="tabela-livros-body">
            <!-- Linhas serão inseridas aqui pelo JS -->
        </tbody>
    </table>

    <script>
        function cadastrarLivro(e) {
            e.preventDefault();

            const titulo = document.getElementById("campo-titulo").value;
            const autor = document.getElementById("campo-autor").value;
            const ano = parseInt(document.getElementById("campo-ano").value);
            const genero = document.getElementById("campo-genero").value;
            const isbn = document.getElementById("campo-isbn").value;

            const livro = { titulo, autor, ano, genero, isbn };

            const livros = JSON.parse(localStorage.getItem("livros")) || [];

            livros.push(livro);
            localStorage.setItem("livros", JSON.stringify(livros));

            e.target.reset();
            exibirLivros();
        }

        function exibirLivros() {
            const livros = JSON.parse(localStorage.getItem("livros")) || [];
            const tbody = document.getElementById("tabela-livros-body");

            tbody.innerHTML = "";

            livros.forEach((livro, index) => {
                const tr = document.createElement("tr");

                tr.innerHTML = `
                    <td>${livro.titulo}</td>
                    <td>${livro.autor}</td>
                    <td>${livro.ano}</td>
                    <td>${livro.genero}</td>
                    <td>${livro.isbn}</td>
                    <td>
                        <button onclick="verDetalhes(${index})">Ver Detalhes</button>
                        <button onclick="removerLivro(${index})" style="margin-left: 5px; color: red;">Remover</button>
                    </td>
                `;

                tbody.appendChild(tr);
            });
        }

        function verDetalhes(index) {
            const livros = JSON.parse(localStorage.getItem("livros")) || [];
            const livro = livros[index];

            alert(
                `Título: ${livro.titulo}\nAutor: ${livro.autor}\nAno: ${livro.ano}\nGênero: ${livro.genero}\nISBN: ${livro.isbn}`
            );
        }

        function removerLivro(index) {
            const livros = JSON.parse(localStorage.getItem("livros")) || [];

            if (index >= 0 && index < livros.length) {
                livros.splice(index, 1);
                localStorage.setItem("livros", JSON.stringify(livros));
                exibirLivros();
            }
        }

        window.onload = exibirLivros;
    </script>
</body>

</html>
